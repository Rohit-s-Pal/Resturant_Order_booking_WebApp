@model Estonia.Models.UserRegisterModel

@{
    ViewData["Title"] = "Sign-Up";
}



         
    </div>
    <!-- Navbar & Hero End -->
    <!-- Service Start -->
    <div class="container-xxl py-5">
        <div class="container">
         
            <div class="signup-container">
                <h2>Signup</h2>
                <form id="signup-form">
                    <div>
                        <label for="username">Username</label>
                        <input type="text" id="username" required>
                    </div>
                    <div>
                        <label for="email">Email</label>
                        <input type="email" id="email" required>
                    </div>
                    <div>
                        <label for="password">Password</label>
                        <input type="password" id="password" required>
                    </div>
                    <button type="submit">Sign Up</button>
                </form>
            </div>


        @if (ViewBag.ErrorMessage != null)
        {
            <p style="color:red;">@ViewBag.ErrorMessage</p>
        }


            <script>
                document.getElementById("signup-form").addEventListener("submit", async function (e) {
                    e.preventDefault();

                    const username = document.getElementById("username").value;
                    const email = document.getElementById("email").value;
                    const password = document.getElementById("password").value;
                const apiUrl = `${window.location.origin}/user/signup`;

                const response = await fetch(apiUrl, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({ username, email, password })
                    });

                    if (response.ok) {
                        alert("Signup successful!");
                        window.location.href = "login.html"; // Redirect to login page
                    } else {
                        alert("Signup failed!");
                    }
                });
            </script>
    

        </div>
    </div>
    <!-- Service End -->
  